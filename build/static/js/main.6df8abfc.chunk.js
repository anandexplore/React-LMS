(this.webpackJsonpeduwebfyp=this.webpackJsonpeduwebfyp||[]).push([[0],{316:function(e,t,a){e.exports=a.p+"static/media/lp.8c3784a7.png"},328:function(e,t,a){e.exports=a(658)},640:function(e,t){},658:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(34),s=a.n(l),i=(a(333),a(334),a(14)),o=a(62),c=a(7),u=a(8),m=a(10),d=a(9),p=a(11),h=r.a.createContext(null),f=function(e){return function(t){return r.a.createElement(h.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({},t,{firebase:a}))}))}},E=h,b=a(23),g=a(105),v=a.n(g),y=(a(335),a(337),a(659),a(674)),O={apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_AUTH_DOMAIN,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_DATABASE_URL,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_PROJECT_ID,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_MESSAGING_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_APP_ID},C=function e(){var t=this;Object(c.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignOut=function(){t.auth.signOut(),y.a.success("Successfully signed out...")},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.user=function(e){return t.db.ref("users/".concat(e))},this.users=function(){return t.db.ref("users")},this.course=function(e){return t.db.ref("courses/".concat(e))},this.courses=function(){return t.db.ref("courses")},this.courseCurriculums=function(e){return t.db.ref("courses/".concat(e,"/curriculum"))},this.assignments=function(e){return t.db.ref("courses/".concat(e,"/assignments"))},this.assignmentRef=function(){return t.storage.ref().child("assignments")},this.onAuthUserListener=function(e,a){t.auth.onAuthStateChanged((function(n){n?t.user(n.uid).on("value",(function(t){var a=t.val();a&&(a.roles||(a.roles={}),n=Object(b.a)({uid:n.uid,email:n.email},a),e(n))})):a()}))},this.onAuthCourseListener=function(e,a){t.auth.onAuthStateChanged((function(){t.courses().on("value",(function(t,n){var r=t.val();if(r){var l=Object.keys(r).map((function(e){return Object(b.a)({},r[e],{uid:e})}));e(l)}else a()}))}))},v.a.initializeApp(O),this.auth=v.a.auth(),this.db=v.a.database(),this.storage=v.a.storage()},S=a(15),w=a(680),x=a(665),j=a(681),k=a(675),D=a(682),A=a(683),I=a(72),T={email:"",password:"",error:""},P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state=Object(b.a)({errorPlacement:"bottomStart",showEmailError:!1,showPasswordError:!1,isFormSubmit:!1},T),a.formSubmit=a.formSubmit.bind(Object(S.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"formSubmit",value:function(e){var t=this,a=this.state,n=a.email,r=a.password;this.props.firebase.doSignInWithEmailAndPassword(n,r).then((function(){t.setState(Object(b.a)({},T)),y.a.success("Successfully logged in. Redirecting...",5e3),t.props.history.push("/dashboard")})).catch((function(e){var a=e.message;t.setState({error:a})})),e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.state,a=t.showEmailError,n=t.showPasswordError,l=t.errorPlacement,s=a?"This field is required":null,i=n?"This field is required":null,o=!this.state.email||!this.state.password;return r.a.createElement("div",null,r.a.createElement(w.a,{fluid:!0,layout:"vertical",onChange:function(t){e.setState({email:t.email,password:t.password})}},r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Email"),r.a.createElement(k.a,{name:"email",errorMessage:s,errorPlacement:l})),r.a.createElement(x.a,{style:{type:"password"}},r.a.createElement(j.a,null,"Password"),r.a.createElement(k.a,{name:"password",errorMessage:i,errorPlacement:l,type:"password"})),this.state.error?r.a.createElement("div",{style:{position:"relative",margin:"20px"}},r.a.createElement(D.a,{showIcon:!0,type:"error",description:this.state.error})):"",r.a.createElement(x.a,null,r.a.createElement(A.a,null,r.a.createElement("div",null,r.a.createElement(I.a,{id:"login",disabled:o,appearance:"ghost",onClick:this.formSubmit},"Login"))))))}}]),t}(n.Component),U=a(666),z=a(27),_=a(672),R=r.a.createContext(null),B=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(R.Consumer,null,(function(t){return r.a.createElement("div",null,r.a.createElement(U.a,{appearance:"inverse"},r.a.createElement(U.a.Header,{style:{display:"flex",padding:"18px 20px",alignItems:"center",justifyContent:"center"}},r.a.createElement("div",null,r.a.createElement(z.a,{icon:"book",size:"2x",style:{paddingRight:"5px"}}),r.a.createElement(i.c,{to:"/",style:{fontSize:"25px",textDecoration:"none"}},"Webcademy"))),r.a.createElement(_.a,{pullRight:!0},t?r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a.Item,null,r.a.createElement(i.c,{to:"/dashboard",style:{color:"white",textDecoration:"none"}},"Dashboard")),r.a.createElement(_.a.Item,{onSelect:e.props.firebase.doSignOut},"Sign out")):r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a.Item,null,r.a.createElement(i.c,{to:"/signup",style:{color:"white",textDecoration:"none"}},"Signup")),r.a.createElement(_.a.Item,null,r.a.createElement(i.c,{to:"/login",style:{color:"white",textDecoration:"none"}},"Login"))))))}))}}]),t}(n.Component),L=f(B),H=a(685),F=a(686),M=a(687),W=a(677),V=a(688),K=a(689),q=a(25),N=function(e){var t=function(t){function a(e){var t;return Object(c.a)(this,a),(t=Object(m.a)(this,Object(d.a)(a).call(this,e))).state={authUser:null},t}return Object(p.a)(a,t),Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.onAuthUserListener((function(t){e.setState({authUser:t})}),(function(){e.setState({authUser:null})}))}},{key:"render",value:function(){return r.a.createElement(R.Provider,{value:this.state.authUser},this.state.authUser?r.a.createElement(e,Object.assign({},this.props,{authUser:this.state.authUser})):r.a.createElement(e,this.props))}}]),a}(r.a.Component);return f(t)},Q=a(684),G=function(e){return function(t){var a=function(a){function n(){return Object(c.a)(this,n),Object(m.a)(this,Object(d.a)(n).apply(this,arguments))}return Object(p.a)(n,a),Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.onAuthUserListener((function(a){e(a)||t.props.history.push("/login")}),(function(){return t.props.history.push("/login")}))}},{key:"render",value:function(){var a=this;return r.a.createElement(R.Consumer,null,(function(n){return e(n)?r.a.createElement(t,a.props):r.a.createElement(Q.a,{center:!0,content:"loading"})}))}}]),n}(r.a.Component);return Object(q.a)(o.e,f)(a)}},J=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.auth.onAuthStateChanged((function(t){t&&e.props.history.push("/dashboard")}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var e=this;return r.a.createElement(R.Consumer,null,(function(t){return t?"":r.a.createElement("div",null,r.a.createElement(H.a,{style:{height:"100vh"}},r.a.createElement(F.a,null,r.a.createElement(L,null)),r.a.createElement(M.a,{style:{margin:"20px",padding:"20px"}},r.a.createElement(W.a,{justify:"center"},r.a.createElement(W.a.Item,{colspan:12},r.a.createElement(V.a,{header:r.a.createElement("h2",null,"Login"),bordered:!0},r.a.createElement(P,e.props))))),r.a.createElement(K.a,{style:{padding:"20px",backgroundColor:"black"}},"ShaneLMS")))}))}}]),t}(n.Component),Y=Object(q.a)(o.e,f)(J),$=a(316),X=a.n($),Z=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.course;return r.a.createElement("div",{style:{marginRight:"6px"}},r.a.createElement(i.c,{to:"/courses/".concat(e.uid.substr(1)),style:{textDecoration:"none"}},r.a.createElement(V.a,{shaded:!0,bordered:!0,bodyFill:!0,style:{display:"inline-block",width:240}},r.a.createElement("img",{alt:"",src:e.image,style:{height:"150px",width:"100%"}}),r.a.createElement(V.a,{style:{maxHeight:"150px",minHeight:"180px"}},r.a.createElement("div",{style:{color:"#272c36",minHeight:"80px",maxHeight:"80px",fontSize:"16px",lineHeight:1.25}},r.a.createElement("p",null,e.title)),r.a.createElement("p",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"black"}},e.description)))))}}]),t}(n.Component),ee=a(39),te=a.n(ee),ae=a(61),ne=function(e){var t=function(t){function a(e){var t;return Object(c.a)(this,a),(t=Object(m.a)(this,Object(d.a)(a).call(this,e))).state={coursesList:null,course:null,loading:!0},t.getCourse=t.getCourse.bind(Object(S.a)(t)),t}return Object(p.a)(a,t),Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.onAuthCourseListener((function(t){e.setState({coursesList:t,loading:!1})}),(function(){e.setState({coursesList:null,loading:!1})}))}},{key:"getCourse",value:function(){var e=Object(ae.a)(te.a.mark((function e(t){var a,n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state.coursesList,n=null,e.next=4,new Promise((function(e){for(var r=0;r<a.length;r++)if(a.uid===t){n=a[r],e();break}}));case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.loading?r.a.createElement(Q.a,{center:!0}):this.state.coursesList?r.a.createElement(e,Object.assign({},this.props,{coursesList:this.state.coursesList,getCourse:this.getCourse})):r.a.createElement(e,this.props))}}]),a}(r.a.Component);return f(t)},re=ne(function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.coursesList;return r.a.createElement("div",null,r.a.createElement(L,null),r.a.createElement(H.a,{style:{flex:1,flexDirection:"row",backgroundColor:"#3498ff",minHeight:"500px"}},r.a.createElement(H.a,{style:{margin:"100px",color:"white"}},r.a.createElement("h1",{style:{lineHeight:"80px",marginBottom:"15px"}},"The Most Trusted ",r.a.createElement("br",null),"Simplified LMS"),r.a.createElement("p",null,"The #1 featured product on ProductHunt and a featured LMS on People's Choice Magazine."),r.a.createElement(I.a,{style:{marginTop:"20px",width:"150px"}},r.a.createElement(i.c,{to:"/courses",style:{textDecoration:"none",color:"#575757"}},"Get Started"))),r.a.createElement(H.a,{style:{margin:"80px",color:"white"}},r.a.createElement("img",{src:X.a,style:{width:"350px",height:"250"},alt:""}))),r.a.createElement(H.a,{style:{margin:"50px",flexDirection:"column"}},r.a.createElement(H.a,null,r.a.createElement("h3",null,"Recently Added")),r.a.createElement(H.a,{style:{flex:1,flexDirection:"row",flexWrap:"wrap"}},e&&e.length?Array.from(e).reverse().map((function(e,t){return t<4?r.a.createElement(Z,{course:e}):null})):null)))}}]),t}(n.Component)),le={name:"",email:"",password:"",isAdmin:!1,error:""},se=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state=Object(b.a)({errorPlacement:"bottomStart",showEmailError:!1,isFormSubmit:!1,referrer:""},le),a.formSubmit=a.formSubmit.bind(Object(S.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"formSubmit",value:function(e){var t=this,a=this.state,n=a.name,r=a.email,l=a.password,s=a.isAdmin,i=a.referrer,o={};s="INSTR"===i,o.userRole=s?"admin":"student",this.props.firebase.doCreateUserWithEmailAndPassword(r,l).then((function(e){return t.props.firebase.user(e.user.uid).set({name:n,email:r,roles:o})})).then((function(){t.setState(Object(b.a)({},le)),y.a.success("Successfully registered. Redirecting...",5e3),t.props.history.push("/dashboard")})).catch((function(e){var a=e.message;t.setState({error:a})})),e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.state,a=t.showEmailError,n=t.errorPlacement,l=a?"This field is required":null,s=this.state.password,i=s&&s.length>2&&s.length<10?"Password must contain at least 10 characters":"",o=!this.state.name||!this.state.email||!(this.state.password&&this.state.password.length>=10);return r.a.createElement("div",null,r.a.createElement(w.a,{fluid:!0,layout:"vertical",onChange:function(t){e.setState({name:t.name,email:t.email,password:t.password,referrer:t.referrer})}},r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Full Name"),r.a.createElement(k.a,{name:"name",errorMessage:l,errorPlacement:n})),r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Email"),r.a.createElement(k.a,{name:"email",errorMessage:l,errorPlacement:n})),r.a.createElement(x.a,{style:{type:"password"}},r.a.createElement(j.a,null,"Password"),r.a.createElement(k.a,{name:"password",errorMessage:i,errorPlacement:n,type:"password"})),r.a.createElement(x.a,{style:{type:"password"}},r.a.createElement(j.a,null,"Referrer (Optional)"),r.a.createElement(k.a,{name:"referrer"})),this.state.error?r.a.createElement("div",{style:{position:"relative",margin:"20px"}},r.a.createElement(D.a,{showIcon:!0,type:"error",description:this.state.error})):"",r.a.createElement(x.a,null,r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"signup",disabled:o,appearance:"ghost",onClick:this.formSubmit},"Signup")))))}}]),t}(n.Component),ie=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.auth.onAuthStateChanged((function(t){t&&e.props.history.push("/dashboard")}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var e=this;return r.a.createElement(R.Consumer,null,(function(t){return t?"":r.a.createElement("div",null,r.a.createElement(H.a,{style:{height:"100vh"}},r.a.createElement(F.a,null,r.a.createElement(L,null)),r.a.createElement(M.a,{style:{margin:"20px",padding:"20px"}},r.a.createElement(W.a,{justify:"center"},r.a.createElement(W.a.Item,{colspan:12},r.a.createElement(V.a,{header:r.a.createElement("h2",null,"Signup"),bordered:!0},r.a.createElement(se,e.props))))),r.a.createElement(K.a,{style:{padding:"20px",backgroundColor:"black"}},"ShaneLMS")))}))}}]),t}(n.Component),oe=Object(q.a)(o.e,f)(ie),ce=a(690),ue=a(691),me=a(692),de=a(326),pe=a(693),he=ne(function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={drawerShow:!1},a.toggleDrawer=a.toggleDrawer.bind(Object(S.a)(a)),a.renderAdmin=a.renderAdmin.bind(Object(S.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"toggleDrawer",value:function(){this.setState({drawerShow:!this.state.drawerShow})}},{key:"renderAdmin",value:function(){var e=this.props.authUser.uid,t=!!this.props.authUser.coursesCreated;if(t){t=this.props.coursesList.filter((function(t){return t.createdBy===e&&t.announcements}));var a=[];return t.forEach((function(e){Object.keys(e.announcements).forEach((function(t){var n=new Date(e.announcements[t].createdOn).toLocaleString();a.push({courseTitle:e.title,content:e.announcements[t].content,createdOn:n,createdBy:e.announcements[t].createdBy})}))})),a=a.sort((function(e,t){return e.createdOn<t.createdOn?1:t.createdOn<e.createdOn?-1:0})),r.a.createElement("div",{style:{flex:1}},a.length?a.map((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ce.a,{color:"violet"},e.courseTitle),r.a.createElement(ce.a,null,e.createdOn," - ",r.a.createElement("span",{style:{fontWeight:"bold"}},e.createdBy?e.createdBy:"Unknown")),r.a.createElement("p",null,e.content),r.a.createElement("br",null))})):r.a.createElement("p",{style:{textAlign:"center",fontStyle:"italic"}},"No announcements have been created..."))}return r.a.createElement("p",{style:{textAlign:"center",fontStyle:"italic"}},"Nothing to display...")}},{key:"renderStudent",value:function(){var e=this.props.authUser.enrolledCourses,t=[];if(e)return e=Object.keys(e).map((function(t){return e[t].courseId})),(e=this.props.coursesList.filter((function(t){return e.includes(t.uid.substr(1))}))).forEach((function(e){e.announcements&&Object.keys(e.announcements).forEach((function(a){var n=new Date(e.announcements[a].createdOn).toLocaleString();t.push({courseTitle:e.title,content:e.announcements[a].content,createdOn:n,createdBy:e.announcements[a].createdBy})}))})),t=t.sort((function(e,t){return e.createdOn<t.createdOn?1:t.createdOn<e.createdOn?-1:0})),r.a.createElement("div",{style:{flex:1}},t.length?t.map((function(e,t){return r.a.createElement("div",{key:t,id:"announcementItem"},r.a.createElement(ce.a,{color:"violet"},e.courseTitle),r.a.createElement(ce.a,null,e.createdOn," - ",r.a.createElement("span",{style:{fontWeight:"bold"}},e.createdBy?e.createdBy:"Unknown")),r.a.createElement("p",null,e.content),r.a.createElement("br",null))})):r.a.createElement("p",{style:{textAlign:"center"}},"No announcements have been created..."))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ue.a,{content:null},r.a.createElement(me.a,{size:"sm"},r.a.createElement(de.a,{id:"announcements",icon:r.a.createElement(z.a,{icon:"bell"}),onClick:this.toggleDrawer}))),r.a.createElement(pe.a,{size:"md",show:this.state.drawerShow,onHide:this.toggleDrawer},r.a.createElement(pe.a.Header,null,r.a.createElement(pe.a.Title,null,"Announcements"),r.a.createElement(pe.a.Body,{style:{height:"100%"}},"admin"===this.props.authUser.roles.userRole?this.renderAdmin():this.renderStudent()))))}}]),t}(n.Component)),fe=a(668),Ee=f((function(e){var t=e.firebase;return r.a.createElement(_.a.Item,{onSelect:t.doSignOut,icon:r.a.createElement(z.a,{icon:"sign-out"})},r.a.createElement("p",{style:{fontSize:"12px"}},"Sign out"))})),be=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={expanded:!0},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.expanded,t=this.props.roles.userRole;return t=t[0].toUpperCase()+t.substr(1),r.a.createElement("div",{style:{width:200}},r.a.createElement(fe.a,{expanded:e,appearance:"subtle",style:{backgroundColor:"#1a1d24",position:"fixed",width:"200px",top:0,left:0,zIndex:10,height:"100vh"}},r.a.createElement(fe.a.Header,null,r.a.createElement("div",{style:{backgroundColor:"#1a1d24",padding:"20px 20px 10px",fontSize:"16px",color:"white"}},r.a.createElement(i.c,{to:"/",style:{textDecoration:"none",color:"white"}},r.a.createElement(z.a,{icon:"book",style:{marginRight:"5px"}}),"Webcademy"))),r.a.createElement(fe.a.Body,null,r.a.createElement(_.a,{style:{textAlign:"center",color:"white",marginTop:"20px",marginBottom:"20px"}},r.a.createElement(me.a,{size:"lg"},r.a.createElement(z.a,{icon:"user-o"}))),r.a.createElement("p",{style:{color:"white",textAlign:"center",marginTop:"-10px",fontSize:"11px"},id:"role"},t),r.a.createElement(_.a,null,r.a.createElement(i.c,{to:"/dashboard",style:ge},r.a.createElement(_.a.Item,{icon:r.a.createElement(z.a,{icon:"dashboard"})},r.a.createElement("p",{style:{fontSize:"12px"}},"Dashboard"))),r.a.createElement(i.c,{to:"/courses",style:ge},r.a.createElement(_.a.Item,{icon:r.a.createElement(z.a,{icon:"heart"})},r.a.createElement("p",{style:{fontSize:"12px"}},"All Courses"))),"Admin"===t?r.a.createElement(i.c,{to:"/submissions",style:ge},r.a.createElement(_.a.Item,{icon:r.a.createElement(z.a,{icon:"pencil"})},r.a.createElement("p",{style:{fontSize:"12px"}},"Submissions"))):null),"Admin"===t?r.a.createElement(_.a,{style:{marginTop:"60px"}},r.a.createElement(i.c,{to:"/course/add",style:Object(b.a)({},ge)},r.a.createElement(_.a.Item,{icon:r.a.createElement(z.a,{icon:"plus-square"})},r.a.createElement("p",{style:{fontSize:"12px"}},"Create course"))),r.a.createElement(i.c,{to:"/announcement/add",style:Object(b.a)({},ge)},r.a.createElement(_.a.Item,{icon:r.a.createElement(z.a,{icon:"plus-square"})},r.a.createElement("p",{style:{fontSize:"12px"}},"Create Announcement")))):null,r.a.createElement(_.a,{style:{bottom:0,position:"absolute",width:"100%"}},r.a.createElement(Ee,null)))))}}]),t}(n.Component),ge={textDecoration:"none",color:"#8e8e93"},ve=function(e,t,a){return function(n){function l(){return Object(c.a)(this,l),Object(m.a)(this,Object(d.a)(l).apply(this,arguments))}return Object(p.a)(l,n),Object(u.a)(l,[{key:"render",value:function(){var n=this;return r.a.createElement(R.Consumer,null,(function(l){var s=l?"row":"column";return r.a.createElement(H.a,{style:{flex:1,flexDirection:s,minHeight:"100%"}},l?r.a.createElement(be,l):r.a.createElement(L,null),r.a.createElement(H.a,{style:{flex:1,flexDirection:"column"}},l?r.a.createElement(H.a,{style:{flex:1,backgroundColor:"#f5f5f5",minHeight:"50px"}},r.a.createElement(e,Object.assign({},n.props,{authUser:l}))):null,r.a.createElement(H.a,{style:{flex:1,margin:"0px"}},r.a.createElement(H.a,{style:{flex:1}},l?r.a.createElement(H.a,{style:{fontSize:"20px"}},r.a.createElement(t,n.props)):null,r.a.createElement(H.a,{style:{flex:1,margin:"20px",fontSize:"20px"}},r.a.createElement(a,Object.assign({},n.props,{authUser:l})))))))}))}}]),l}(r.a.Component)},ye=a(678),Oe=a(670),Ce=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={courses:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(ae.a)(te.a.mark((function e(){var t,a,n,r=this;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.authUser.coursesCreated,a=[],n=null,!t){e.next=10;break}return a=(a=Object.keys(t).map((function(e){return t[e].courseId}))).map((function(e){return new Promise((function(t){r.props.firebase.course("-".concat(e)).once("value").then((function(a){var n=a.val();t({course:n,id:e})}))}))})),e.next=8,Promise.all(a).then((function(e){return e}));case 8:n=e.sent,this.setState({courses:n});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.courses?this.state.courses:[];return r.a.createElement("div",null,r.a.createElement("div",{style:{marginBottom:"5px"}},r.a.createElement("p",null,"My Created Courses")),r.a.createElement("div",null,e?r.a.createElement(Oe.a,{hover:!0},e.map((function(e,t){var a=e.course.curriculum||{};a=a?Object.keys(a).length:0;var n=e.course.students?Object.keys(e.course.students).length:0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.c,{to:"/courses/".concat(e.id),style:{textDecoration:"none",color:"#575757"}},r.a.createElement(Oe.a.Item,{key:t,index:t},r.a.createElement(W.a,null,r.a.createElement(W.a.Item,{colspan:3},r.a.createElement("img",{src:e.course.image,width:"100px",height:"70px",alt:""})),r.a.createElement(W.a.Item,{colspan:8,style:Object(b.a)({},Se,{flexDirection:"column",alignItems:"flex-start",overflow:"hidden"})},r.a.createElement("div",{style:xe},e.course.title)),r.a.createElement(W.a.Item,{colspan:3},r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement("div",{style:we},"Students"),r.a.createElement("div",{style:je},n))),r.a.createElement(W.a.Item,{colspan:3},r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement("div",{style:we},"Curriculums"),r.a.createElement("div",{style:je},a))),r.a.createElement(W.a.Item,{colspan:4,style:Object(b.a)({},Se)},r.a.createElement(i.b,{to:{pathname:"/course/edit/".concat(e.id),state:{course:e.course}}},r.a.createElement(I.a,{id:"editBtn",color:"yellow",appearance:"ghost"},"Edit")))))))}))):r.a.createElement("p",null,"No courses created...")))}}]),t}(r.a.Component),Se={display:"flex",justifyContent:"center",alignItems:"center",height:"60px"},we={fontSize:"0.666em",color:"#97969B",fontWeight:"lighter",paddingBottom:5},xe={padding:5,whiteSpace:"nowrap",fontWeight:500,fontSize:"14px"},je={fontSize:"1.2em",fontWeight:500},ke=f(Ce),De=a(673),Ae=a(669),Ie=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).open=function(){a.setState({show:!0})},a.close=function(){a.setState({show:!1})},a.state={courses:[],show:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(ae.a)(te.a.mark((function e(){var t,a,n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.authUser.enrolledCourses,a=this.props.coursesList,n=[],t&&(n=(n=Object.keys(t).map((function(e){var n=t[e].courseId,r=a.filter((function(e){return e.uid==="-".concat(n)}));return{courseId:t[e].courseId,courseTitle:r[0].title,submissions:t[e].submissions}}))).map((function(e){if(e.submissions){var t=Object.keys(e.submissions).map((function(t){return e.submissions[t]}));return{courseId:e.courseId,courseTitle:e.courseTitle,submissions:t}}return{courseId:e.courseId,courseTitle:e.courseTitle}})),this.setState({submissions:n}),n=n.map((function(e){return e.submissions?(e.submissions=e.submissions.map((function(t){var n="-"+t.assId,r=a.filter((function(t){return t.uid==="-".concat(e.courseId)}))[0].assignments,l=Object.keys(r);return r=(r=(r=l.map((function(e){return{key:e,data:r[e]}}))).filter((function(e){return e.key===n})))[0].data,Object(b.a)({},t,{assTitle:r.title})})),null):null})).flat());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.submissions?this.state.submissions:[];return r.a.createElement("div",null,r.a.createElement("div",{style:{marginBottom:"5px"}},r.a.createElement("p",null,"My Submissions")),r.a.createElement("div",null,t?t.map((function(t){return r.a.createElement(V.a,{bordered:!0,header:t.courseTitle},r.a.createElement(De.a,{data:t.submissions,style:{fontSize:"13px"}},r.a.createElement(De.a.Column,{width:160,resizable:!0},r.a.createElement(De.a.HeaderCell,null,"Submitted On"),r.a.createElement(De.a.Cell,{resizable:!0},(function(e){var t=new Date(e.submittedOn).toLocaleString();return r.a.createElement("p",null,t)}))),r.a.createElement(De.a.Column,{width:160,resizable:!0},r.a.createElement(De.a.HeaderCell,null,"Assignment Title"),r.a.createElement(De.a.Cell,{resizable:!0,dataKey:"assTitle"})),r.a.createElement(De.a.Column,{width:120,resizable:!0},r.a.createElement(De.a.HeaderCell,null,"Status"),r.a.createElement(De.a.Cell,{resizable:!0},(function(e){return"new"===e.status?r.a.createElement("p",{style:{color:"red"}},"Pending Review"):r.a.createElement("p",{style:{color:"green"}},"Reviewed")}))),r.a.createElement(De.a.Column,{width:160,resizable:!0,align:"center"},r.a.createElement(De.a.HeaderCell,null,"Reviewed On"),r.a.createElement(De.a.Cell,{resizable:!0},(function(e){var t=e.reviewedOn?new Date(e.reviewedOn).toLocaleString():null;return e.reviewedOn?r.a.createElement("p",null,t):r.a.createElement("p",{style:{color:"green"}},"-")}))),r.a.createElement(De.a.Column,{width:160,resizable:!0,align:"center"},r.a.createElement(De.a.HeaderCell,null,"Marks"),r.a.createElement(De.a.Cell,{resizable:!0},(function(e){return e.marks?r.a.createElement("p",{style:{fontWeight:"bold"}},e.marks,"%"):r.a.createElement("p",{style:{color:"green"}},"-")}))),r.a.createElement(De.a.Column,{width:160,resizable:!0,align:"center"},r.a.createElement(De.a.HeaderCell,null,"Instructor Comments"),r.a.createElement(De.a.Cell,{resizable:!0},(function(t){return t.comments?r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{id:"showFeedback",onClick:e.open},"Show"),r.a.createElement(Ae.a,{backdrop:"static",show:e.state.show,onHide:e.close,size:"xs"},r.a.createElement(Ae.a.Body,null,r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Instructor comments"),r.a.createElement("p",{id:"feedback"},t.comments))),r.a.createElement(Ae.a.Footer,null,r.a.createElement(I.a,{onClick:e.close,appearance:"primary"},"Close")))):r.a.createElement("p",{style:{color:"green"}},"-")})))," ","*/}"))})):null))}}]),t}(r.a.Component),Te=Object(q.a)(f,ne)(Ie),Pe=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.authUser;return"admin"===e.roles.userRole?r.a.createElement(ke,{authUser:e}):r.a.createElement(Te,{authUser:e})}}]),t}(r.a.Component),Ue=ve((function(e){return r.a.createElement("div",null,r.a.createElement("div",{style:{position:"absolute",right:18,top:10}},r.a.createElement(he,e)))}),(function(){return r.a.createElement(ye.a,{style:{fontSize:"12px"}},r.a.createElement(ye.a.Item,{active:!0},"Dashboard"))}),(function(e){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(Pe,e)))})),ze=G((function(e){return!!e}))(Ue),_e=a(145),Re=a(671),Be=a(325),Le=[{label:"Primary School",value:"primary-school"},{label:"High School",value:"high-school"},{label:"College",value:"college"},{label:"Degree",value:"degree"},{label:"Masters",value:"master"},{label:"Other",value:"other"}],He=[{label:"Fundamental",value:"fundamental"},{label:"Intermediate",value:"intermediate"},{label:"Advanced",value:"advanced"},{label:"Fundamental-Intermediate",value:"fundamental-intermediate"},{label:"Fundamental-Advanced",value:"fundamental-advanced"},{label:"Other",value:"other"}],Fe=function(e){var t=e.onChange;return r.a.createElement(_e.a,{type:"number",onChange:function(e){t(e)},style:{width:"90px"}})},Me=ve((function(e){return r.a.createElement("div",null,r.a.createElement("div",{style:{position:"absolute",right:18,top:10}},r.a.createElement(he,e)))}),(function(){return r.a.createElement(ye.a,{style:{fontSize:"12px"}},r.a.createElement(i.c,{to:"/dashboard"},"Dashboard"),r.a.createElement(i.c,{to:"/courses"},"Courses"),r.a.createElement(ye.a.Item,{active:!0},"Add New Course"))}),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={showError:!1,errorPlacement:"bottomStart",formValue:{title:"",qualification:"",levelOfStudy:"",duration:0,description:"",prerequisite:""},featureImage:null,uploading:!1,createCourseBtnShow:!1},a.formSubmit=a.formSubmit.bind(Object(S.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"formSubmit",value:function(){var e=this;this.setState({createCourseBtnShow:!0});var t=this.state.formValue,a=t.title,n=t.qualification,r=t.levelOfStudy,l=t.duration,s=t.description,i=t.prerequisite,o=this.props.firebase.auth.currentUser.uid;a&&n&&r&&l&&s&&i&&this.state.setFileInfo?this.props.firebase.courses().push({createdBy:o,title:a,qualification:n,levelOfStudy:r,duration:l,description:s,prerequisite:i,image:this.state.setFileInfo},(function(t){t&&(y.a.error("An error occurred while creating course. Please try again.",5e3),e.setState({createCourseBtnShow:!1}))})).then((function(t){var a=t.key.substr(1,t.key.length);e.props.firebase.user(o).child("coursesCreated").push({courseId:a}),e.props.history.push("/courses/".concat(a))})).catch((function(e){console.log(e)})):(y.a.error("Please fill in all fields.",5e3),this.setState({createCourseBtnShow:!1}))}},{key:"previewFile",value:function(e,t){var a=new FileReader;a.onloadend=function(){t(a.result)},a.readAsDataURL(e)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(H.a,{style:{flex:1,flexDirection:"column"}},r.a.createElement(H.a,{style:{alignItems:"center"}},r.a.createElement(Re.a,{dragable:!0,fileListVisible:!1,listType:"picture",onUpload:function(t){e.setState({uploading:!0}),e.previewFile(t.blobFile,(function(t){e.setState({setFileInfo:t})}))},onError:function(){}},r.a.createElement(I.a,{style:{width:"150px",height:"150px"}},this.state.setFileInfo?r.a.createElement("img",{src:this.state.setFileInfo,width:"100%",height:"100%",alt:""}):r.a.createElement(z.a,{icon:"image",size:"5x"})))),r.a.createElement(H.a,null,r.a.createElement(w.a,{fluid:!0,onChange:function(t){return e.setState({formValue:t})}},r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Course Title"),r.a.createElement(k.a,{name:"title"})),r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Qualification"),r.a.createElement(k.a,{name:"qualification",accepter:Be.a,placeholder:"Default",data:Le})),r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Level"),r.a.createElement(k.a,{name:"levelOfStudy",accepter:Be.a,placeholder:"Default",data:He})),r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Duration (Hours)"),r.a.createElement(k.a,{name:"duration",accepter:Fe,placeholder:"0"})),r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Course Description"),r.a.createElement(k.a,{rows:5,name:"description",componentClass:"textarea"})),r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Prerequisites"),r.a.createElement(k.a,{rows:5,name:"prerequisite",componentClass:"textarea",placeholder:"Eg. Basic business knowledge"})),r.a.createElement(x.a,null,r.a.createElement(A.a,null,r.a.createElement(I.a,{disabled:this.state.createCourseBtnShow,appearance:"ghost",onClick:this.formSubmit},"Create")))))))}}]),t}(r.a.Component)),We=Object(q.a)(G((function(e){return e&&!("admin"!==e.roles.userRole)})),f)(Me),Ve=a(679),Ke=[{label:"Primary School",value:"primary-school"},{label:"High School",value:"high-school"},{label:"College",value:"college"},{label:"Degree",value:"degree"},{label:"Masters",value:"master"},{label:"Other",value:"other"}],qe=[{label:"Fundamental",value:"fundamental"},{label:"Intermediate",value:"intermediate"},{label:"Advanced",value:"advanced"},{label:"Fundamental-Intermediate",value:"fundamental-intermediate"},{label:"Fundamental-Advanced",value:"fundamental-advanced"},{label:"Other",value:"other"}],Ne=ve((function(e){return r.a.createElement("div",null,r.a.createElement("div",{style:{position:"absolute",right:18,top:10}},r.a.createElement(he,e)))}),(function(){return r.a.createElement(ye.a,{style:{fontSize:"12px"}},r.a.createElement(i.c,{to:"/dashboard"},"Dashboard"),r.a.createElement(i.c,{to:"/courses"},"Courses"),r.a.createElement(ye.a.Item,{active:!0},"Edit Course"))}),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={course:null,showError:!1,errorPlacement:"bottomStart",formValue:{title:"",qualification:"",levelOfStudy:"",description:"",prerequisite:""},featureImage:null,uploading:!1,setFileInfo:null},a.formSubmit=a.formSubmit.bind(Object(S.a)(a)),a.retrievePageCourse=a.retrievePageCourse.bind(Object(S.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"retrievePageCourse",value:function(e){var t=this.props.coursesList?this.props.coursesList:[];if(t){for(var a=null,n=0;n<t.length;n++)if(t[n].uid==="-".concat(e)){a=t[n];break}this.setState({course:a})}}},{key:"formSubmit",value:function(){var e=this,t=this.state.formValue,a=this.state.course;Object.keys(t).forEach((function(e){t[e]&&(a[e]=t[e])})),this.props.firebase.course("-".concat(this.props.match.params.id)).update({title:a.title,qualification:a.qualification,levelOfStudy:a.levelOfStudy,description:a.description,prerequisite:a.prerequisite,image:this.state.setFileInfo?this.state.setFileInfo:a.image},(function(e){e&&y.a.error("An error occurred while creating course. Please try again.",5e3)})).then((function(t){e.props.history.push("/courses/".concat(e.props.match.params.id))}))}},{key:"previewFile",value:function(e,t){var a=new FileReader;a.onloadend=function(){t(a.result)},a.readAsDataURL(e)}},{key:"componentDidMount",value:function(){this.retrievePageCourse(this.props.match.params.id)}},{key:"render",value:function(){var e=this,t=this.state.course?this.state.course:null;return r.a.createElement("div",null,t?r.a.createElement(H.a,{style:{flex:1,flexDirection:"column"}},r.a.createElement(H.a,{style:{alignItems:"center"}},r.a.createElement(Re.a,{dragable:!0,listType:"picture",fileListVisible:!1,action:"/",onUpload:function(t){e.setState({uploading:!0}),e.previewFile(t.blobFile,(function(t){e.setState({setFileInfo:t})}))}},r.a.createElement(I.a,{style:{width:"150px",height:"150px"}},this.state.setFileInfo?r.a.createElement("img",{src:this.state.setFileInfo,width:"100%",height:"100%",alt:""}):r.a.createElement("img",{src:t.image,alt:"",style:{width:"150px",height:"150px"}})))),r.a.createElement(H.a,null,r.a.createElement(w.a,{fluid:!0,onChange:function(t){return e.setState({formValue:t})}},r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Course Title"),r.a.createElement(k.a,{name:"title",value:this.state.formValue.title?this.state.formValue.title:t.title})),r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Qualification"),r.a.createElement(k.a,{name:"qualification",accepter:Be.a,placeholder:"Default",data:Ke,value:this.state.formValue.qualification?this.state.formValue.qualification:t.qualification})),r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Level"),r.a.createElement(k.a,{name:"levelOfStudy",accepter:Be.a,placeholder:"Default",data:qe,value:this.state.formValue.levelOfStudy?this.state.formValue.levelOfStudy:t.levelOfStudy})),r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Duration (Hours)"),r.a.createElement(k.a,{style:{width:"90px"},name:"duration",accepter:Ve.a,value:this.state.formValue.duration?this.state.formValue.duration:t.duration})),r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Course Description"),r.a.createElement(k.a,{rows:5,name:"description",componentClass:"textarea",value:this.state.formValue.description?this.state.formValue.description:t.description})),r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Prerequisites"),r.a.createElement(k.a,{rows:5,name:"prerequisite",componentClass:"textarea",placeholder:"Eg. Basic business knowledge",value:this.state.formValue.prerequisite?this.state.formValue.prerequisite:t.prerequisite})),r.a.createElement(x.a,null,r.a.createElement(A.a,null,r.a.createElement(I.a,{id:"saveBtn",appearance:"ghost",onClick:this.formSubmit},"Save")))))):r.a.createElement("p",null,"Loading..."))}}]),t}(r.a.Component)),Qe=Object(q.a)(G((function(e){return e&&!("admin"!==e.roles.userRole)})),ne,f)(Ne),Ge=a(695),Je=a(694),Ye=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={editorContext:null,content:null,formValue:{title:"",shortDescription:"",allowPreview:!1}},a.formSubmit=a.formSubmit.bind(Object(S.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"close",value:function(){this.setState({show:!1})}},{key:"open",value:function(e){this.setState({show:!0})}},{key:"onDanteSaveHandler",value:function(e,t){this.setState({editorContext:e,content:t})}},{key:"formSubmit",value:function(){var e=this,t=this.state.formValue,a=t.title,n=t.shortDescription,r=t.allowPreview,l=this.props.match.params.id;r=!!r,a&&n?this.props.firebase.courseCurriculums("-".concat(l)).push({title:a,shortDescription:n,allowPreview:r},(function(e){e&&y.a.error("An error occurred while creating curriculum. Please try again.",5e3)})).then((function(t){var a=t.key.substr(1,t.key.length);e.props.history.push("/courses/".concat(l,"/curriculum/").concat(a))})):y.a.error("Title and description cannot be empty.",5e3)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"modal-container"},r.a.createElement(Ae.a.Header,null,r.a.createElement(Ae.a.Title,null,"Add Curriculum")),r.a.createElement(Ae.a.Body,null,r.a.createElement(H.a,{style:{height:"100%"}},r.a.createElement(w.a,{fluid:!0,onChange:function(t){return e.setState({formValue:t})}},r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Title"),r.a.createElement(k.a,{name:"title"})),r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Short Description"),r.a.createElement(k.a,{name:"shortDescription"})),r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Allow Preview?"),r.a.createElement("p",{style:{fontSize:"10px",fontStyle:"italic",padding:"3px"}},"Enabling this option will allow non-login users to access the curriculum."),r.a.createElement(k.a,{name:"allowPreview",defaultValue:"false",accepter:Je.a})),r.a.createElement(x.a,null,r.a.createElement(A.a,{style:{textAlign:"center"}},r.a.createElement(I.a,{appearance:"ghost",onClick:this.formSubmit,style:{width:"100px"}},"Next")))))))}}]),t}(r.a.Component),$e=a(676).a.Line,Xe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={curriculum:[],formValue:{title:"",curriculum:"",type:"",uploaded:!1},assFile:null,uploaderDisabled:!1,uploadProgressShow:!1,uploadProgress:0},a.onUploadChange=a.onUploadChange.bind(Object(S.a)(a)),a.getCurriculums=a.getCurriculums.bind(Object(S.a)(a)),a.formSubmit=a.formSubmit.bind(Object(S.a)(a)),a.formNext=a.formNext.bind(Object(S.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"getCurriculums",value:function(){var e=this;this.props.firebase.courseCurriculums("-"+this.props.match.params.id).once("value").then((function(t){var a=t.val();if(a){var n=Object.keys(a),r=[];n.forEach((function(t){var n={value:t,label:a[t].title.trim()};r.push(n),e.setState({curriculum:r})}))}}))}},{key:"componentDidMount",value:function(){this.getCurriculums()}},{key:"onUploadChange",value:function(e){this.state.assFile?this.setState({assFile:null}):this.setState({assFile:e})}},{key:"formSubmit",value:function(){var e=this,t=this.state.formValue,a=t.title,n=t.curriculum,r=t.type,l="-"+this.props.match.params.id,s=this.state.assFile,i=Date.now();if(a&&s&&n){var o=this.props.firebase.assignmentRef().child("".concat(this.props.courseTitle,"/").concat(i,"_").concat(s[0].blobFile.name)).put(s[0].blobFile);o.on("state_changed",(function(t){var a=t.bytesTransferred/t.totalBytes*100;e.setState({uploadProgressShow:!0,uploadProgress:a})}),(function(){y.a.error("Upload failed...Please try again...")}),Object(ae.a)(te.a.mark((function t(){var s;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y.a.success("Created successfully"),e.setState({uploaded:!0}),t.next=4,o.snapshot.ref.getDownloadURL().then((function(e){return e}));case 4:s=t.sent,e.props.firebase.course(l).child("assignments").push({curriId:n.substr(1),title:a,type:r,attachmentUrl:s},(function(e){e&&y.a.error("An error occured while creating assignment. Please try again.",5e3)})).then((function(e){window.location.reload(!1)}));case 6:case"end":return t.stop()}}),t)}))))}else y.a.error("Please fill in all fields.")}},{key:"formNext",value:function(){var e=this,t=this.state.formValue,a=t.title,n=t.curriculum,r=t.type,l="-"+this.props.match.params.id;a&&n?this.props.firebase.course(l).child("assignments").push({curriId:n,title:a,type:r},(function(e){e&&y.a.error("An error occured while creating assignment. Please try again.",5e3)})).then((function(t){var a=t.key.substr(1);e.props.history.push("/courses/".concat(l.substr(1),"/assignment/").concat(a))})):y.a.error("Please fill in all fields.")}},{key:"render",value:function(){var e=this,t=this.state.curriculum,a=!!this.state.assFile;return r.a.createElement("div",null,r.a.createElement(Ae.a.Header,null,r.a.createElement(Ae.a.Title,null,"Create an Assignment"),r.a.createElement(Ae.a.Body,null,r.a.createElement(H.a,null,r.a.createElement(w.a,{fluid:!0,onChange:function(t){return e.setState({formValue:t})}},r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Assignment Title"),r.a.createElement(k.a,{name:"title"})),r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Assign assignment to curriculum:"," "),r.a.createElement(k.a,{name:"curriculum",accepter:Be.a,placeholder:"-",data:t})),r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Assignment type:"," "),r.a.createElement(k.a,{name:"type",accepter:Be.a,placeholder:"-",data:Ze})),"file"===this.state.formValue.type?r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Assignment File (Optional):"," "),r.a.createElement(Re.a,{disabled:a,autoUpload:!1,dragable:!0,action:"/",onChange:this.onUploadChange,style:{border:"1px dashed #a4a9b3",overflowY:"scroll",maxHeight:"140px"}},a?r.a.createElement("div",{style:{lineHeight:"80px",width:"100%"}},"Max one(1) file uploaded."):r.a.createElement("div",{style:{lineHeight:"80px",width:"100%"}},"Click or Drag assignment to this area to upload")),this.state.uploadProgressShow?r.a.createElement($e,{percent:this.state.uploadProgress,status:"success"}):""):null,r.a.createElement(x.a,null,this.state.formValue.type?r.a.createElement(A.a,{style:{textAlign:"center"}},"file"===this.state.formValue.type?r.a.createElement(I.a,{appearance:"ghost",disabled:this.state.uploaded,onClick:this.formSubmit,style:{width:"100px"}},"Create"):r.a.createElement(I.a,{appearance:"ghost",onClick:this.formNext,style:{width:"100px"}},"Next")):r.a.createElement(I.a,{appearance:"ghost",disabled:!0,style:{width:"100px"}},"Create")))))))}}]),t}(r.a.Component),Ze=[{value:"file",label:"Attachment only"},{value:"subjective",label:"Subjective"}],et=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).renderAssignments=function(e){return r.a.createElement(i.c,{to:"/courses/".concat(a.props.match.params.id,"/assignment/").concat(e.assignmentId.substr(1))},e.title)},a.state={course:null,loading:!0,authUser:null,panelNavigate:"",showCurriculumModal:!1,showAssignmentModal:!1},a.panelSelect=a.panelSelect.bind(Object(S.a)(a)),a.enrollCourse=a.enrollCourse.bind(Object(S.a)(a)),a.renderCurriculum=a.renderCurriculum.bind(Object(S.a)(a)),a.retrievePageCourse=a.retrievePageCourse.bind(Object(S.a)(a)),a.curriculumModalToggle=a.curriculumModalToggle.bind(Object(S.a)(a)),a.assignmentModalToggle=a.assignmentModalToggle.bind(Object(S.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.retrievePageCourse(this.props.match.params.id),window.scrollTo(0,0)}},{key:"retrievePageCourse",value:function(e){var t=this.props.coursesList?this.props.coursesList:[];if(t){for(var a=null,n=0;n<t.length;n++)if(t[n].uid==="-".concat(e)){a=t[n];break}this.setState({course:a})}}},{key:"panelSelect",value:function(e){this.setState({panelNavigate:e})}},{key:"curriculumModalToggle",value:function(){this.setState({showCurriculumModal:!this.state.showCurriculumModal})}},{key:"assignmentModalToggle",value:function(){this.setState({showAssignmentModal:!this.state.showAssignmentModal})}},{key:"renderEnrollButton",value:function(e,t,a,n){return e?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,{to:{pathname:"/course/edit/".concat(this.props.match.params.id),state:{course:this.state.course?this.state.course:null}}},r.a.createElement(I.a,{appearance:"ghost",color:"yellow",style:{width:"100%",height:"55px"}},r.a.createElement("p",{style:{fontSize:"16px"}},"Edit Course")))):t&&"admin"===t.roles.userRole||a?r.a.createElement(I.a,{appearance:"default",style:{width:"100%",height:"55px",color:"#202020"}},r.a.createElement("p",{id:"enrolled",style:{fontSize:"16px"}},"Enrolled")):r.a.createElement(I.a,{appearance:"ghost",style:{width:"100%",height:"55px"},id:"enrollCourse",onClick:this.enrollCourse},r.a.createElement("p",{style:{fontSize:"16px"}},"Enroll Course"))}},{key:"enrollCourse",value:function(){var e=this,t=this.state.authUser;t?this.props.firebase.user(t.uid).child("enrolledCourses").push({courseId:this.props.match.params.id},(function(e){e&&y.a.error("There was an error registering to courses...")})).then((function(a){var n=Date.now();y.a.success("Successfully enrolled to course."),e.props.firebase.course("-".concat(e.props.match.params.id)).child("students").push({studId:t.uid,joinedOn:n})})):(y.a.error("Login first"),this.props.history.push("/login"))}},{key:"renderCurriculum",value:function(e,t,a,n){return e||t||n?r.a.createElement(i.c,{to:"/courses/".concat(this.props.match.params.id,"/curriculum/").concat(a.curriculumId)},a.shortDescription):r.a.createElement("p",null,a.shortDescription)}},{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.onAuthUserListener((function(t){return e.setState({authUser:t,loading:!1})}),(function(){e.setState({authUser:null,loading:!1})}))}},{key:"render",value:function(){var e=this,t=null,a=null,n=null,l=this.props.match.params.id,s=this.state.authUser?this.state.authUser:null;console.log(this.state.course);var o=this.state.course?this.state.course:{},c=o.levelOfStudy,u=o.description,m=o.image,d=o.duration,p=o.prerequisite,h=o.title,f=o.curriculum,E=o.assignments,g=o.qualification;if(this.state.course&&(f&&(f=Object.keys(f).map((function(e){return Object(b.a)({},f[e],{curriculumId:e.substr(1)})}))),E&&(E=Object.keys(E).map((function(e){return Object(b.a)({},E[e],{assignmentId:e})}))),s&&s.coursesCreated&&(t=(t=Object.keys(s.coursesCreated).map((function(e){return Object(b.a)({},s.coursesCreated[e],{uid:e})}))).map((function(e){return e.courseId})),n=t.includes(this.props.match.params.id))),s&&s.enrolledCourses){a=s.enrolledCourses;var v=Object.keys(a);a=(a=(a=v.map((function(e){return a[e]}))).map((function(e){return e.courseId}))).includes(l)}return r.a.createElement("div",null,r.a.createElement("div",{className:"modal-container"},r.a.createElement(Ae.a,{full:!0,show:this.state.showCurriculumModal,onHide:this.curriculumModalToggle,backdrop:"static",style:{overflow:"visible"}},r.a.createElement(Ye,this.props)),r.a.createElement(Ae.a,{full:!0,show:this.state.showAssignmentModal,onHide:this.assignmentModalToggle,backdrop:"static",style:{overflow:"visible"}},r.a.createElement(Xe,Object.assign({},this.props,{courseTitle:h})))),r.a.createElement(H.a,{style:{flex:1,flexDirection:"row"}},r.a.createElement(H.a,{style:{flex:3,flexDirection:"column"}},r.a.createElement(H.a,{style:{justifyContent:"flex-start",maxWidth:"90%"}},r.a.createElement(H.a,{style:{marginBottom:"50px",minHeight:"100px"}},r.a.createElement("h2",{id:"title"},h),r.a.createElement("p",{style:{marginTop:"40px",fontSize:"20px"}},u)),r.a.createElement(H.a,{style:{marginBottom:"50px",minHeight:"50px"}},r.a.createElement("h4",{style:{fontWeight:"bold"}},"Duration"),r.a.createElement("p",{style:{marginTop:"40px",fontSize:"20px"}},d," Hours")),r.a.createElement(H.a,{style:{marginBottom:"50px",minHeight:"50px"}},r.a.createElement("h4",{style:{fontWeight:"bold"}},"Academic Qualification"),r.a.createElement("p",{style:{marginTop:"40px",fontSize:"20px"}},g[0].toUpperCase()+g.substr(1))),r.a.createElement(H.a,{style:{marginBottom:"50px",minHeight:"50px"}},r.a.createElement("h4",{style:{fontWeight:"bold"}},"Requirements"),r.a.createElement("p",{style:{marginTop:"40px",fontSize:"20px"}},p)),this.state.loading?r.a.createElement(Q.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{style:{marginBottom:"50px"}},r.a.createElement("h4",{style:{padding:"5px",fontWeight:"bold"}},"Curriculum"),r.a.createElement(Ge.a,{onSelect:this.panelSelect,accordion:!0,style:{backgroundColor:"#fffff0",minHeight:"80px"}},f?f.map((function(t,l){var s=!!t.allowPreview;return r.a.createElement(V.a,{key:l,header:t.title,eventKey:t.curriculumId},e.renderCurriculum(s,n,t,a))})):r.a.createElement(H.a,null,r.a.createElement(V.a,{header:"No curriculum found..."})),s&&n?r.a.createElement(I.a,{appearance:"subtle",onClick:this.curriculumModalToggle},"+ Add curriculum"):null)),r.a.createElement(H.a,null,r.a.createElement("h4",{style:{padding:"5px",fontWeight:"bold"}},"Assignments"),a||"admin"===(s&&s.roles.userRole)?r.a.createElement(V.a,{header:"Assignments",bordered:!0,bodyFill:!0},r.a.createElement(De.a,{height:400,data:E,style:{fontSize:"12px"}},r.a.createElement(De.a.Column,{width:50,align:"center",resizable:!0},r.a.createElement(De.a.HeaderCell,null,"Id"),r.a.createElement(De.a.Cell,{dataKey:"assignmentId"})),r.a.createElement(De.a.Column,{flexGrow:1,align:"center",fixed:!0},r.a.createElement(De.a.HeaderCell,null,"Assignment Title"),r.a.createElement(De.a.Cell,{dataKey:"title"})),r.a.createElement(De.a.Column,{width:80,align:"center",fixed:!0},r.a.createElement(De.a.HeaderCell,null,"Type"),r.a.createElement(De.a.Cell,{dataKey:"type"})),r.a.createElement(De.a.Column,{width:110,align:"center",fixed:"right"},r.a.createElement(De.a.HeaderCell,null,"Action"),r.a.createElement(De.a.Cell,null,(function(t){return"subjective"===t.type?r.a.createElement(i.c,{to:"/courses/".concat(e.props.match.params.id,"/assignment/").concat(t.assignmentId.substr(1))},r.a.createElement(I.a,null,"View")):r.a.createElement("a",{href:t.attachmentUrl},r.a.createElement(I.a,null,"View"))})))),s&&n?r.a.createElement(I.a,{appearance:"subtle",onClick:this.assignmentModalToggle},"+ Add assignments"):null):r.a.createElement("p",{style:{fontSize:"12px"}},"Enroll to view assignments..."))))),r.a.createElement(H.a,{style:{flex:1,alignItems:"right",maxWidth:"222px"}},r.a.createElement("div",{style:{width:"220px",height:"200px"}},r.a.createElement("img",{src:m,width:"100%",height:"100%",alt:""})),r.a.createElement(H.a,{style:{flexDirection:"column"}},r.a.createElement(H.a,{style:{textTransform:"capitalize",flexDirection:"row",padding:"10px",maxHeight:"50px"}},r.a.createElement(z.a,{style:{fontSize:"1em"},icon:"universal-access"}),r.a.createElement("p",{style:{paddingLeft:"10px",fontSize:"15px"}},c)),r.a.createElement(H.a,null,this.renderEnrollButton(n,s,a,l))))))}}]),t}(r.a.Component),tt=ne(ve((function(e){return r.a.createElement("div",null,r.a.createElement("div",{style:{position:"absolute",right:18,top:10}},r.a.createElement(he,e)))}),(function(e){return r.a.createElement(ye.a,{style:{fontSize:"12px"}},r.a.createElement(i.c,{to:"/dashboard"},"Dashboard"),r.a.createElement(ye.a.Item,{active:!0},"Courses"))}),(function(e){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(et,e)))}))),at=a(141),nt=a.n(at),rt=(a(293),function(e){var t=function(t){function a(e){var t;return Object(c.a)(this,a),(t=Object(m.a)(this,Object(d.a)(a).call(this,e))).state={content:null},t.getCurriculum=t.getCurriculum.bind(Object(S.a)(t)),t.updateCurriculum=t.updateCurriculum.bind(Object(S.a)(t)),t}return Object(p.a)(a,t),Object(u.a)(a,[{key:"getCurriculum",value:function(e,t){var a=this;this.props.firebase.courseCurriculums(e).child(t).child("curriculumContent").once("value").then((function(e){a.setState({content:e.val()})}))}},{key:"updateCurriculum",value:function(e,t,a){this.props.firebase.courseCurriculums(e).child(t).update({curriculumContent:a}).then((function(){y.a.success("Successfully saved")})).catch((function(e){y.a.error("Save failed... Please try again.")}))}},{key:"render",value:function(){return r.a.createElement(e,Object.assign({},this.props,{getCurriculum:this.getCurriculum,content:this.state.content,updateCurriculum:this.updateCurriculum}))}}]),a}(r.a.Component);return f(t)}),lt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={contentState:"",sunEditor:{editing:!1,resizingBar:!1,enable:!1,showToolbar:!1,disable:!0}},a.editorOnChange=a.editorOnChange.bind(Object(S.a)(a)),a.editorSave=a.editorSave.bind(Object(S.a)(a)),a.editToggle=a.editToggle.bind(Object(S.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id,a=this.props.match.url.replace(/\/.*?\//g,"").replace(t,"");this.props.getCurriculum(a,t),this.props.firebase.courseCurriculums("-".concat(a)).child("-".concat(t)).child("curriculumContent").on("value",(function(t){e.setState({contentState:t.val()})}))}},{key:"editToggle",value:function(){this.setState({sunEditor:{editing:!this.state.sunEditor.editing,resizingBar:!this.state.sunEditor.resizingBar,enable:!this.state.sunEditor.enable,showToolbar:!this.state.sunEditor.showToolbar,disable:!this.state.sunEditor.disable}})}},{key:"editorOnChange",value:function(e){this.setState({contentState:e})}},{key:"editorSave",value:function(){var e=this.props.match.params.id,t=this.props.match.url.replace(/\/.*?\//g,"").replace(e,"");this.props.updateCurriculum("-"+t,"-"+e,this.state.contentState)}},{key:"render",value:function(){var e=this;return r.a.createElement(R.Consumer,null,(function(t){var a=null,n=null;if(t&&"admin"===t.roles.userRole){a=(a=Object.keys(t.coursesCreated).map((function(e){return Object(b.a)({},t.coursesCreated[e],{uid:e})}))).map((function(e){return e.courseId}));var l=e.props.match.params.id,s=e.props.match.url.replace(/\/.*?\//g,"").replace(l,"");n=a.includes(s)}return r.a.createElement(H.a,null,r.a.createElement(U.a,{appearance:"inverse"},r.a.createElement(_.a,{pullLeft:!0,onSelect:function(){e.props.history.goBack()}},r.a.createElement(_.a.Item,{icon:r.a.createElement(z.a,{size:"2x",icon:"chevron-left"})})),n?e.state.sunEditor.editing?r.a.createElement("div",null,r.a.createElement(_.a,{pullRight:!0,onSelect:e.editorSave},r.a.createElement(_.a.Item,{icon:r.a.createElement(z.a,{icon:"save"})},"Save")),r.a.createElement(_.a,{pullRight:!0,onSelect:e.editToggle},r.a.createElement(_.a.Item,{icon:r.a.createElement(z.a,{icon:"close"})},"Close"))):r.a.createElement("div",null,r.a.createElement(_.a,{pullRight:!0,onSelect:e.editToggle},r.a.createElement(_.a.Item,{icon:r.a.createElement(z.a,{icon:"edit"})},"Edit"))):""),r.a.createElement(H.a,{style:{flex:1}},r.a.createElement(H.a,{id:"curriculumEditor",style:{flex:1,alignItems:"center"}},r.a.createElement(nt.a,{placeholder:"Please type here...",resizingBar:e.state.sunEditor.resizingBar,enable:e.state.sunEditor.enable,showToolbar:e.state.sunEditor.showToolbar,disable:e.state.sunEditor.disable,setOptions:{height:"auto",resizingBar:!1,buttonList:[["formatBlock","font","fontSize"],["paragraphStyle","align","list","lineHeight","fontColor","hiliteColor","horizontalRule","table"],["bold","underline","italic","strike","subscript","superscript"],["fullScreen"],["removeFormat"],["outdent","indent"],["image","link","video"]]},setContents:e.state.contentState?e.state.contentState:"No curriculum content found...",onChange:e.editorOnChange}))))}))}}]),t}(r.a.Component),st=Object(q.a)(rt)(lt),it=ve((function(e){return r.a.createElement("div",null,r.a.createElement("div",{style:{position:"absolute",right:18,top:10}},r.a.createElement(he,e)))}),(function(){return r.a.createElement(ye.a,{style:{fontSize:"12px"}},r.a.createElement(i.c,{to:"/dashboard"},"Dashboard"),r.a.createElement(i.c,{to:"/courses"},"Courses"),r.a.createElement(ye.a.Item,{active:!0},"Add New Announcement"))}),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={showError:!1,errorPlacement:"bottomStart",formValue:{courseId:"",announcement:""},userCreatedCourses:null},a.formSubmit=a.formSubmit.bind(Object(S.a)(a)),a.getCreatedCourses=a.getCreatedCourses.bind(Object(S.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"formSubmit",value:function(){var e=this,t=this.state.formValue,a=t.courseId,n=t.announcement;a&&n?this.props.firebase.course(a).child("announcements").push({createdOn:Date.now(),createdBy:this.props.authUser.name,content:n},(function(e){e&&y.a.error("An error occurred while creating announcement. Please try again.",5e3)})).then((function(t){y.a.success("Announcement created successfully."),e.props.history.push("/dashboard")})):y.a.error("Please fill in all fields.",5e3)}},{key:"getCreatedCourses",value:function(){var e=this.props.coursesList,t=this.props.authUser.uid;e=(e=e.filter((function(e){return e.createdBy===t}))).map((function(e){return{label:e.title,value:e.uid}})),this.setState({userCreatedCourses:e})}},{key:"componentDidMount",value:function(){this.getCreatedCourses()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(H.a,{style:{flex:1,flexDirection:"column"}},r.a.createElement(H.a,null,r.a.createElement(w.a,{fluid:!0,onChange:function(t){return e.setState({formValue:t})}},r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Add announcement to course:"),r.a.createElement(k.a,{name:"courseId",accepter:Be.a,placeholder:"--Select--",data:this.state.userCreatedCourses?this.state.userCreatedCourses:{label:"null",value:"null"}})),r.a.createElement(x.a,null,r.a.createElement(j.a,null,"Announcement Content"),r.a.createElement(k.a,{rows:5,name:"announcement",componentClass:"textarea"})),r.a.createElement(x.a,null,r.a.createElement(A.a,{style:{textAlign:"center"}},r.a.createElement(I.a,{appearance:"ghost",onClick:this.formSubmit,style:{width:"100px"}},"Create")))))))}}]),t}(r.a.Component)),ot=Object(q.a)(G((function(e){return e&&!("admin"!==e.roles.userRole)})),ne,f)(it),ct=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.coursesList;return r.a.createElement(H.a,{style:{flex:1,flexDirection:"row",flexWrap:"wrap",marginLeft:"20px"}},e&&e.length?Array.from(e).reverse().map((function(e){return r.a.createElement(Z,{course:e})})):r.a.createElement("p",null,"No courses found..."))}}]),t}(r.a.Component),ut=ne(ve((function(e){return r.a.createElement("div",null,r.a.createElement("div",{style:{position:"absolute",right:18,top:10}},r.a.createElement(he,e)))}),(function(e){return r.a.createElement(ye.a,{style:{fontSize:"12px"}},r.a.createElement(i.c,{to:"/dashboard"},"Dashboard"),r.a.createElement(ye.a.Item,{active:!0},"All Courses"))}),(function(e){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(ct,e)))}))),mt=a(696),dt=a(142),pt=a.n(dt),ht=function(e){var t=function(t){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(m.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).updateAssignment=function(e,a,n){n=n||[],t.props.firebase.assignments(e).child(a).update({questions:n}).then((function(){y.a.success("Successfully saved")})).catch((function(e){y.a.error("Save failed... Please try again.")}))},t}return Object(p.a)(a,t),Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(e,Object.assign({},this.props,{getAssignments:this.getAssignments,updateAssignment:this.updateAssignment}))}}]),a}(r.a.Component);return f(t)},ft=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).studentHasAttempted=function(e){var t=a.props.authUser?a.props.firebase.auth.currentUser.uid:null,n=[];return t&&a.props.firebase.user(t).child("enrolledCourses").on("value",(function(e){e.forEach((function(e){var t=e.val().submissions;t&&n.push(t)}))})),n.length&&(n=(n=n.map((function(e){return Object.keys(e).map((function(t){return e[t].assId}))}))).flat()),!!n.includes(e)},a.editorOnChange=function(e){a.setState({contentState:e})},a.saveQuestions=function(){var e=a.props.match.params.id,t=a.props.match.url.replace(/\/.*?\//g,"").replace(e,"");a.props.updateAssignment("-"+t,"-"+e,a.state.assignmentsQ),a.closeModal()},a.addQuestion=function(){if(a.state.contentState){var e=a.state.assignmentsQ?a.state.assignmentsQ:[];e.push(a.state.contentState),a.setState({assignmentsQ:e})}else y.a.error("Content cannot be blank.");a.setState({contentState:""})},a.removeQ=function(e){var t=a.state.assignmentsQ;t=t.filter((function(t,a){return a!==e})),a.setState({assignmentsQ:t})},a.renderQuestions=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=a.state.assignmentsQ,n=a.props.match.params.id,l=a.studentHasAttempted(n),s=!!a.props.authUser&&("admin"===a.props.authUser.roles.userRole||null);return r.a.createElement(H.a,{style:{minHeight:"120px"}},r.a.createElement("div",{style:{marginBottom:"30px"}},r.a.createElement("h1",null,"Assignment")),r.a.createElement(w.a,{onChange:function(e){a.setState({formValue:e})},style:{marginBottom:"20px"}},t.map((function(t,n){return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,{key:n},r.a.createElement(j.a,null,"Question ",n+1),pt()(t),r.a.createElement(k.a,{name:"q".concat(n+1),disabled:!!l}),e?null:r.a.createElement(I.a,{color:"red",onClick:function(){return a.removeQ(n)}},"Remove")))})),e?r.a.createElement(x.a,null,l?r.a.createElement(I.a,{id:"submitted",appearance:"ghost",color:"red",onClick:a.studentSubmitAnswer,style:{width:"100%"},disabled:!!l},"Submitted"):r.a.createElement(I.a,{id:"submit",appearance:"ghost",onClick:a.studentSubmitAnswer,style:{width:"100%"},disabled:!(!l&&!s)},s?r.a.createElement("p",null,"Admin Viewable Only"):r.a.createElement("p",null,"Finish and Submit"))):null))},a.closeModal=function(){a.setState({show:!1})},a.openModal=function(){a.setState({show:!0})},a.studentSubmitAnswer=function(){var e=a.props.firebase.auth.currentUser.uid,t=a.props.match.params.id,n=a.props.match.url.replace(/\/.*?\//g,"").replace(t,""),r=a.state.formValue;if(r){var l=a.props.authUser,s=l.enrolledCourses,i=Object.keys(l.enrolledCourses);s=(s=i.map((function(e){return{snapshotKey:e,courseId:s[e].courseId}}))).filter((function(e){return e.courseId===n}));var o=Date.now();a.props.firebase.user(e).child("enrolledCourses").child(s[0].snapshotKey).child("submissions").push({status:"new",assId:t,answers:r,submittedOn:o}).then((function(t){y.a.success("Successfully submitted"),a.props.firebase.course("-".concat(n)).child("submissions").push({status:"new",studentId:e,studentName:l.name,submittedOn:o,snapshotKey:t.key})}))}else y.a.error("Please answer all questions.")},a.renderForAdmin=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{appearance:"inverse"},r.a.createElement(_.a,{pullLeft:!0,onSelect:function(){a.props.history.goBack()}},r.a.createElement(_.a.Item,{icon:r.a.createElement(z.a,{size:"2x",icon:"chevron-left"})}))),r.a.createElement(H.a,{style:{marginTop:"20px",flexWrap:"wrap",margin:"20px"}},a.renderQuestions(),r.a.createElement(nt.a,{placeholder:"Please type here...",setOptions:{height:"auto",resizingBar:!1,buttonList:[["bold","underline","italic"],["list","fontColor","hiliteColor"],["image"]]},onChange:a.editorOnChange}),r.a.createElement(mt.a,{style:{textAlign:"center"}},r.a.createElement(I.a,{appearance:"primary",style:{marginTop:"20px",width:"50%"},onClick:a.openModal},"Save All"),r.a.createElement(I.a,{appearance:"primary",style:{marginTop:"20px",width:"50%"},onClick:a.addQuestion,disabled:!a.state.contentState},"Add"),r.a.createElement(Ae.a,{backdrop:"static",show:a.state.show,onHide:a.close,size:"xs"},r.a.createElement(Ae.a.Body,null,r.a.createElement(z.a,{icon:"remind",style:{color:"#ffb300",fontSize:24}})," ","Confirm saving/overwriting changes?"),r.a.createElement(Ae.a.Footer,null,r.a.createElement(I.a,{onClick:a.saveQuestions,appearance:"primary"},"Ok"),r.a.createElement(I.a,{onClick:a.closeModal,appearance:"subtle"},"Cancel"))))))},a.renderForStudent=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{appearance:"inverse"},r.a.createElement(_.a,{pullLeft:!0,onSelect:function(){a.props.history.goBack()}},r.a.createElement(_.a.Item,{icon:r.a.createElement(z.a,{size:"2x",icon:"chevron-left"})}))),r.a.createElement(H.a,{style:{marginTop:"20px",flexWrap:"wrap",margin:"20px",alignItems:"center"}},a.renderQuestions(!0)))},a.state={contentState:"",assignmentsQ:[],show:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id,a=this.props.match.url.replace(/\/.*?\//g,"").replace(t,"");this.props.firebase.assignments("-".concat(a)).child("-".concat(t)).child("questions").on("value",(function(t){e.setState({assignmentsQ:t.val()?t.val():[]})}))}},{key:"render",value:function(){var e=this.props.authUser,t=null,a=null;if(e&&"admin"===e.roles.userRole&&(e.coursesCreated?Object.keys(e.coursesCreated):null)){t=(t=Object.keys(e.coursesCreated).map((function(t){return Object(b.a)({},e.coursesCreated[t],{uid:t})}))).map((function(e){return e.courseId}));var n=this.props.match.params.id,l=this.props.match.url.replace(/\/.*?\//g,"").replace(n,"");a=t.includes(l)}return r.a.createElement(H.a,{style:{flex:1,flexDirection:"column"}},a?this.renderForAdmin():this.renderForStudent())}}]),t}(r.a.Component),Et=Object(q.a)(N,ht)(ft),bt=a(327),gt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).reviewAssignment=function(e){a.props.firebase.user(e.studentId).child("enrolledCourses").on("value",(function(t){var n=[],r=[],l=a.props.coursesList;t.forEach((function(e){var t=e.val();t.enrolledCourseKey=e.key,t.submissions&&r.push(t)}));var s=(n=(n=(r=r.map((function(e){var t=Object.keys(e.submissions).map((function(t){return{submissionKey:t,data:e.submissions[t]}}));return{courseId:e.courseId,enrolledCourseKey:e.enrolledCourseKey,submissions:t}})).flat()).filter((function(t){return Object.keys(t.submissions).map((function(e){return t.submissions[e].submissionKey})).includes(e.snapshotKey)}))).map((function(t){return t.submissions=t.submissions.filter((function(t){return t.submissionKey===e.snapshotKey})),t.submissions=t.submissions[0],t}))).map((function(e){return"-".concat(e.submissions.data.assId)}))[0],i=l.map((function(e){return e.assignments}));i=(i=i.filter((function(e,t){return e?Object.keys(e).includes(s):null})))[0][s].questions,a.setState({show:!0,modalData:{questions:i,submissionData:n[0],rowData:e}})}))},a.close=function(){a.setState({show:!1})},a.onReviewSubmit=function(e){var t=a.state.formValue,n=t.marks,r=t.comments,l=a.props.firebase.auth.currentUser.uid,s=e.rowData,i=e.submissionData;if(n=n||(s.marks?s.marks:null)){var o=Date.now();r=r||(s.comments?s.comments:null),a.props.firebase.course("-".concat(i.courseId)).child("submissions").child(s.key).update({status:"reviewed",comments:r,reviewedOn:o,reviewedBy:l,marks:n}).then((function(){a.props.firebase.user(s.studentId).child("enrolledCourses").child(i.enrolledCourseKey).child("submissions").child(i.submissions.submissionKey).update({status:"reviewed",reviewedOn:o,reviewer:a.props.authUser.name,reviewerId:l,comments:r,marks:n}).then((function(){y.a.success("Successfully reviewed."),a.setState({show:!1})}))}))}else y.a.error("Marks cannot be empty.")},a.renderModal=function(e){var t=e.submissionData,n=e.questions,l=e.rowData,s=t.submissions.data.answers;s=Object.keys(s).map((function(e){return s[e]}));for(var i=[],o=0;o<n.length;o++)i.push({question:n[o],answer:s[o]});return r.a.createElement(Ae.a,{overflow:!0,show:a.state.show,onHide:a.close},r.a.createElement(Ae.a.Header,null,r.a.createElement(Ae.a.Title,null,"Assignment Review")),r.a.createElement(bt.a,null,"Student Submission"),r.a.createElement(Ae.a.Body,null,r.a.createElement(w.a,{style:{marginBottom:"20px"},onChange:function(e){a.setState({formValue:e})},formDefaultValue:{comments:l.comments?l.comments:null,marks:l.marks?l.marks:null}},i.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(x.a,{style:{marginBottom:"10px"}},r.a.createElement(j.a,null,"Q",t+1),pt()(e.question),r.a.createElement(k.a,{style:{width:"200",resize:"auto"},rows:3,componentClass:"textarea",name:"answer",readOnly:!0,plainText:!0,value:e.answer})))})),r.a.createElement(bt.a,null,"Marks allocation and Comments"),r.a.createElement(x.a,null,r.a.createElement(j.a,null,r.a.createElement("span",{style:{fontWeight:"bold"}},"Instructor comment (Optional):")),r.a.createElement(k.a,{style:{width:"200",resize:"auto"},rows:5,componentClass:"textarea",name:"comments"})),r.a.createElement(x.a,null,r.a.createElement(j.a,null,r.a.createElement("span",{style:{fontWeight:"bold"}},"Marks"," ",l.marks?r.a.createElement("span",{style:{color:"red"}},l.marks):null,"/ 100% :")),r.a.createElement(k.a,{name:"marks",accepter:Ve.a})),r.a.createElement(x.a,null,l.marks?r.a.createElement(I.a,{onClick:function(){return a.onReviewSubmit(e)},style:{width:"100%"},color:"red"},"Update"):r.a.createElement(I.a,{id:"submitBtn",onClick:function(){return a.onReviewSubmit(e)},style:{width:"100%"},color:"blue"},"Submit")))))},a.state={show:!1,modalData:{},formValue:{}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state.modalData&&this.state.modalData.questions&&this.state.modalData.submissionData?this.state.modalData:null,a=this.props.coursesList,n=this.props.authUser?this.props.authUser.uid:null,l=[],s=this.props.authUser&&this.props.authUser.coursesCreated?this.props.authUser.coursesCreated:null;return s&&(s=Object.keys(s).map((function(e){return s[e].courseId})),(l=(l=(a=a.filter((function(e){return e.createdBy===n}))).map((function(e){return{title:e.title,submissions:e.submissions}}))).map((function(e){return e.submissions&&(e.submissions=Object.keys(e.submissions).map((function(t){return e.submissions[t].key=t,e.submissions[t]}))),e}))).submissions&&l.submissions.reverse()),r.a.createElement(H.a,{style:{flex:1,marginLeft:"20px",fontSize:"13px"}},t?this.renderModal(t):null,l.map((function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,t.title),r.a.createElement(V.a,{bordered:!0},r.a.createElement(De.a,{data:t.submissions},r.a.createElement(De.a.Column,{width:160,resizable:!0},r.a.createElement(De.a.HeaderCell,null,"Submitted On"),r.a.createElement(De.a.Cell,{resizable:!0},(function(e){var t=new Date(e.submittedOn).toLocaleString();return r.a.createElement("p",null,t)}))),r.a.createElement(De.a.Column,{align:"center",width:200,resizable:!0},r.a.createElement(De.a.HeaderCell,null,"Reviewed On"),r.a.createElement(De.a.Cell,{resizable:!0},(function(e){var t=e.reviewedOn?new Date(e.reviewedOn).toLocaleString():null;return e.reviewedOn?r.a.createElement("p",null,t):r.a.createElement("p",{style:{color:"green"}},"-")}))),r.a.createElement(De.a.Column,{width:150,resizable:!0},r.a.createElement(De.a.HeaderCell,null,"Student Name"),r.a.createElement(De.a.Cell,{dataKey:"studentName",resizable:!0})),r.a.createElement(De.a.Column,{width:150,resizable:!0},r.a.createElement(De.a.HeaderCell,null,"Status"),r.a.createElement(De.a.Cell,{style:{color:"red"}},(function(e){return"new"===e.status?r.a.createElement("p",{id:"status",style:{color:"red"}},"Pending Review"):r.a.createElement("p",{id:"status",style:{color:"Green"}},"Reviewed")}))),r.a.createElement(De.a.Column,{width:100,resizable:!0,fixed:"right"},r.a.createElement(De.a.HeaderCell,null,"Action"),r.a.createElement(De.a.Cell,null,(function(t){return r.a.createElement(I.a,{id:"reviewBtn",onClick:function(){return e.reviewAssignment(t)}},"Review")}))))))})))}}]),t}(r.a.Component),vt=ve((function(e){return r.a.createElement("div",null,r.a.createElement("div",{style:{position:"absolute",right:18,top:10}},r.a.createElement(he,e)))}),(function(e){return r.a.createElement(ye.a,{style:{fontSize:"12px"}},r.a.createElement(i.c,{to:"/dashboard"},"Dashboard"),r.a.createElement(ye.a.Item,{active:!0},"Student Submissions"))}),(function(e){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(gt,e)))})),yt=Object(q.a)(ne,G((function(e){return e&&!("admin"!==e.roles.userRole)})))(vt),Ot=N((function(){return r.a.createElement(i.a,null,r.a.createElement("div",null,r.a.createElement(o.a,{exact:!0,path:"/",component:re}),r.a.createElement(o.a,{exact:!0,path:"/login",component:Y}),r.a.createElement(o.a,{exact:!0,path:"/signup",component:oe}),r.a.createElement(o.a,{exact:!0,path:"/dashboard",component:ze}),r.a.createElement(o.a,{exact:!0,path:"/courses",component:ut}),r.a.createElement(o.a,{exact:!0,path:"/course/add",component:We}),r.a.createElement(o.a,{exact:!0,path:"/announcement/add",component:ot}),r.a.createElement(o.a,{exact:!0,path:"/course/edit/:id",component:Qe}),r.a.createElement(o.a,{exact:!0,path:"/courses/:id",component:tt}),r.a.createElement(o.a,{exact:!0,path:"/submissions",component:yt}),r.a.createElement(o.a,{exact:!0,path:"/courses/:id/curriculum/:id",component:st}),r.a.createElement(o.a,{exact:!0,path:"/courses/:id/assignment/:id",component:Et})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(E.Provider,{value:new C},r.a.createElement(Ot,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[328,1,2]]]);
//# sourceMappingURL=main.6df8abfc.chunk.js.map